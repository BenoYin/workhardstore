<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知享 - 知识·工具·成长</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script>
        // 配置Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAE6M1B9s2e-CqQQUc4x2nqxW5rYnBFTE4",
            authDomain: "zhixiang-site.firebaseapp.com",
            projectId: "zhixiang-site",
            storageBucket: "zhixiang-site.appspot.com",
            messagingSenderId: "704113981755",
            appId: "1:704113981755:web:74ab8efdc7d0c158325f1e"
         };
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
            }
            .btn-primary {
                @apply bg-primary text-white px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:bg-primary/90 active:scale-95;
            }
            .btn-secondary {
                @apply bg-white text-primary border border-primary px-6 py-3 rounded-lg font-medium transition-all duration-300 hover:bg-primary/5 active:scale-95;
            }
            .text-balance {
                text-wrap: balance;
            }
            .loader {
                @apply w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin;
            }
            /* 博客相关样式 */
            .blog-card-shadow {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }
            .blog-card-hover {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .blog-card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
        }
    </style>
</head>
<body class="font-sans bg-gray-50 text-gray-800">
    <!-- 导航栏 -->
    <header id="navbar" class="fixed w-full bg-white/90 backdrop-blur-sm shadow-sm z-50 transition-all duration-300">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="#" class="flex items-center space-x-2">
                        <span class="text-primary text-2xl"><i class="fa fa-lightbulb-o"></i></span>
                        <span class="text-xl font-bold">知享</span>
                    </a>
                </div>

                <!-- 桌面导航 -->
                <nav class="hidden md:flex space-x-8">
                    <a href="#blog" class="text-primary border-b-2 border-primary pb-1 font-medium transition">博客</a>
                    <a href="#tools" class="text-gray-700 hover:text-primary font-medium transition">工具</a>
                    <a href="#membership" class="text-gray-700 hover:text-primary font-medium transition">会员</a>
                    <a href="#about" class="text-gray-700 hover:text-primary font-medium transition">关于</a>
                </nav>

                <!-- 用户菜单 -->
                <div id="userMenu" class="hidden md:flex items-center space-x-4">
<div id="authenticatedMenu" class="hidden items-center space-x-4">
    <!-- 现有用户信息展示 -->
    <span id="userName" class="text-gray-700"></span>
    <!-- 新增退出按钮 -->
    <button id="logoutBtn" class="text-gray-700 hover:text-primary font-medium transition">
        退出登录
    </button>
</div>

                    <!-- 未登录状态 -->
                    <div id="guestMenu">
                        <button id="loginBtn" class="text-gray-700 hover:text-primary font-medium transition">登录</button>
                        <button id="registerBtn" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary/90 transition">注册</button>
                    </div>
                </div>

                <!-- 移动端菜单按钮 -->
                <div class="md:hidden">
                    <button id="mobileMenuBtn" class="text-gray-700 hover:text-primary">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

<div id="mobileAuthenticatedMenu" class="hidden pt-2 border-t">
    <!-- 移动端用户信息 -->
    <span id="mobileUserName" class="text-gray-700"></span>
    <!-- 移动端退出按钮 -->
    <button id="mobileLogoutBtn" class="text-gray-700 hover:text-primary font-medium transition">
        退出登录
    </button>
</div>

        <!-- 移动端菜单 -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <div class="container mx-auto px-4 py-3 space-y-3">
                <a href="#blog" class="block text-primary font-medium py-2 transition">博客</a>
                <a href="#tools" class="block text-gray-700 hover:text-primary font-medium py-2 transition">工具</a>
                <a href="#membership" class="block text-gray-700 hover:text-primary font-medium py-2 transition">会员</a>
                <a href="#about" class="block text-gray-700 hover:text-primary font-medium py-2 transition">关于</a>
                <div id="mobileGuestMenu" class="flex space-x-4 pt-2 border-t">
                    <button id="mobileLoginBtn" class="text-gray-700 hover:text-primary font-medium transition">登录</button>
                    <button id="mobileRegisterBtn" class="bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary/90 transition">注册</button>
                </div>
            </div>
        </div>
    </header>
    <!-- 登录模态框 -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6 md:p-8 transform transition-all">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">登录</h3>
                <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-envelope"></i>
                        </span>
                        <input type="email" id="loginEmail" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="your@email.com" required>
                        <div id="emailError" class="hidden text-red-500 text-sm mt-1">请输入有效的邮箱地址</div>
                    </div>
                </div>
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-lock"></i>
                        </span>
                        <input type="password" id="loginPassword" class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="••••••••" required>
                        <button type="button" id="toggleLoginPassword" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input type="checkbox" id="rememberMe" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                        <label for="rememberMe" class="ml-2 block text-sm text-gray-700">记住我</label>
                    </div>
                    <button type="button" id="forgotPasswordBtn" class="text-sm text-primary hover:text-primary/80 transition">忘记密码?</button>
                </div>
                <div id="loginError" class="hidden bg-red-50 text-red-600 p-3 rounded-lg text-sm"></div>
                <button type="submit" id="loginSubmitBtn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition flex items-center justify-center">
                    <span>登录</span>
                    <div id="loginLoader" class="loader ml-2 hidden"></div>
                </button>
                <p class="text-center text-gray-600 text-sm">
                    还没有账号? <button type="button" id="switchToRegister" class="text-primary font-medium hover:underline">立即注册</button>
                </p>
            </form>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div id="registerModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6 md:p-8 transform transition-all">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">注册</h3>
                <button id="closeRegisterModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <form id="registerForm" class="space-y-4">
                <div>
                    <label for="registerName" class="block text-sm font-medium text-gray-700 mb-1">用户名</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-user"></i>
                        </span>
                        <input type="text" id="registerName" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="请输入用户名" required>
                    </div>
                </div>
                <div>
                    <label for="registerEmail" class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-envelope"></i>
                        </span>
                        <input type="email" id="registerEmail" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="your@email.com" required>
                        <div id="regEmailError" class="hidden text-red-500 text-sm mt-1">请输入有效的邮箱地址</div>
                    </div>
                </div>
                <div>
                    <label for="registerPassword" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-lock"></i>
                        </span>
                        <input type="password" id="registerPassword" class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="至少8位字符" required>
                        <button type="button" id="toggleRegisterPassword" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                    <div class="mt-1">
                        <div class="flex items-center text-xs text-gray-500">
                            <div id="passwordStrength" class="h-1 w-full bg-gray-200 rounded-full overflow-hidden">
                                <div id="passwordStrengthBar" class="h-full bg-red-500 w-0 transition-all duration-300"></div>
                            </div>
                            <span id="passwordStrengthText" class="ml-2">密码强度</span>
                        </div>
                    </div>
                </div>
                <div>
                    <label for="registerConfirmPassword" class="block text-sm font-medium text-gray-700 mb-1">确认密码</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-lock"></i>
                        </span>
                        <input type="password" id="registerConfirmPassword" class="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="再次输入密码" required>
                        <button type="button" id="toggleConfirmPassword" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                    <div id="passwordMismatchError" class="hidden text-red-500 text-sm mt-1">两次输入的密码不一致</div>
                </div>
                <div class="flex items-start">
                    <div class="flex items-center h-5">
                        <input id="terms" type="checkbox" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded" required>
                    </div>
                    <div class="ml-3 text-sm">
                        <label for="terms" class="text-gray-600">我同意<a href="#" class="text-primary hover:underline">服务条款</a>和<a href="#" class="text-primary hover:underline">隐私政策</a></label>
                    </div>
                </div>
                <div id="registerError" class="hidden bg-red-50 text-red-600 p-3 rounded-lg text-sm"></div>
                <button type="submit" id="registerSubmitBtn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition flex items-center justify-center">
                    <span>注册</span>
                    <div id="registerLoader" class="loader ml-2 hidden"></div>
                </button>
                <p class="text-center text-gray-600 text-sm">
                    已有账号? <button type="button" id="switchToLogin" class="text-primary font-medium hover:underline">立即登录</button>
                </p>
            </form>
        </div>
    </div>

    <!-- 忘记密码模态框 -->
    <div id="forgotPasswordModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6 md:p-8 transform transition-all">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">忘记密码</h3>
                <button id="closeForgotPasswordModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <form id="forgotPasswordForm" class="space-y-4">
                <p class="text-gray-600 mb-4">请输入您的邮箱地址，我们将发送重置密码的链接到您的邮箱。</p>
                <div>
                    <label for="forgotEmail" class="block text-sm font-medium text-gray-700 mb-1">邮箱</label>
                    <div class="relative">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                            <i class="fa fa-envelope"></i>
                        </span>
                        <input type="email" id="forgotEmail" class="w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition" placeholder="your@email.com" required>
                    </div>
                </div>
                <div id="forgotPasswordError" class="hidden bg-red-50 text-red-600 p-3 rounded-lg text-sm"></div>
                <div id="forgotPasswordSuccess" class="hidden bg-green-50 text-green-600 p-3 rounded-lg text-sm"></div>
                <button type="submit" id="forgotPasswordSubmitBtn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-primary/90 transition flex items-center justify-center">
                    <span>发送重置链接</span>
                    <div id="forgotPasswordLoader" class="loader ml-2 hidden"></div>
                </button>
            </form>
        </div>
    </div>

    <!-- 英雄区域 -->
    <section class="pt-32 pb-20 bg-gradient-to-br from-blue-50 to-indigo-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row items-center">
                <div class="lg:w-1/2 mb-10 lg:mb-0">
                    <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold leading-tight text-dark mb-6">
                        知识·工具·成长<br>
                        <span class="text-primary">尽在知享</span>
                    </h1>
                    <p class="text-gray-600 text-lg md:text-xl mb-8 max-w-lg text-balance">
                        精选实用工具与深度内容的结合，助你提升效率，加速成长，探索更多可能。
                    </p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="#tools" class="btn-primary text-center">
                            探索工具
                        </a>
                        <a href="#blog" class="btn-secondary text-center">
                            阅读博客
                        </a>
                    </div>
                    <div class="mt-10">
                        <p class="text-gray-500 text-sm mb-3">受到超过10,000+用户的信任</p>
                        <div class="flex items-center space-x-6">
                            <div class="flex -space-x-2">
                                <img src="https://picsum.photos/id/1001/40/40" alt="用户头像" class="w-8 h-8 rounded-full border-2 border-white">
                                <img src="https://picsum.photos/id/1002/40/40" alt="用户头像" class="w-8 h-8 rounded-full border-2 border-white">
                                <img src="https://picsum.photos/id/1003/40/40" alt="用户头像" class="w-8 h-8 rounded-full border-2 border-white">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="lg:w-1/2 relative">
                    <img src="https://picsum.photos/id/20/600/400" alt="知享平台展示" class="rounded-2xl shadow-xl w-full h-auto">
                    <div class="absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fa fa-check text-secondary text-xl"></i>
                            </div>
                            <div>
                                <div class="font-bold">高效工具</div>
                                <div class="text-gray-500 text-sm">50+实用工具</div>
                            </div>
                        </div>
                    </div>
                    <div class="absolute -top-6 -right-6 bg-white p-4 rounded-xl shadow-lg">
                        <div class="flex items-center">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                <i class="fa fa-book text-primary text-xl"></i>
                            </div>
                            <div>
                                <div class="font-bold">优质内容</div>
                                <div class="text-gray-500 text-sm">200+原创文章</div>
                            </div>
                        </div>
                    </div>
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-primary/20 rounded-full blur-3xl -z-10 transform scale-110"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- 精选博客区域 -->
    <section id="blog" class="py-16 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold mb-4">效率工具与成长思维</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">探索最新的效率工具、时间管理技巧和个人成长策略，提升你的工作与生活质量</p>
            </div>

            <!-- 博客分类 -->
            <div id="blogCategories" class="flex flex-wrap justify-center gap-3 mb-10">
              
            </div>

            <!-- 博客列表 -->
            <div id="blogList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- 博客文章将通过JavaScript动态生成 -->
            </div>
            
            <!-- 分页 -->
            <div id="blogPagination" class="flex justify-center mt-12">
                <button id="loadMoreBtn" class="px-6 py-3 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors flex items-center">
                    <span>加载更多</span>
                    <i class="fa fa-chevron-down ml-2"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- 工具区域 -->
    <section id="tools" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">实用工具</h2>
                
                <p class="text-gray-600 max-w-2xl mx-auto">精心打造的在线工具，帮助你解决日常工作和学习中的问题</p>
            </div>

            <!-- 工具搜索 -->
            <div class="max-w-2xl mx-auto mb-10">
                <div class="relative">
                    <input type="text" id="toolSearch" placeholder="搜索工具..." class="w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 shadow-sm focus:ring-2 focus:ring-primary focus:border-primary transition">
                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">
                        <i class="fa fa-search text-lg"></i>
                    </span>
                </div>
            </div>

            <!-- 工具分类 -->
            <div class="flex flex-wrap justify-center gap-2 mb-10">
                <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm shadow-sm transition">全部工具</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">文本处理</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">密码工具</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">计算工具</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">图像工具</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">开发工具</button>
                <button class="px-4 py-2 bg-white text-gray-700 rounded-lg text-sm shadow-sm transition hover:bg-gray-100">转换工具</button>
            </div>

            <!-- 工具列表（通过JS动态生成） -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto" id="toolsGrid">
                <!-- 工具卡片将通过JavaScript动态生成 -->
                <div class="animate-pulse col-span-1 sm:col-span-2 lg:col-span-3 flex justify-center py-8">
                    <div class="text-gray-500">加载工具中...</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 工具模态框 -->
    <div id="toolModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-6 border-b flex justify-between items-center">
                <h3 id="toolModalTitle" class="text-xl font-bold">工具名称</h3>
                <button id="closeToolModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div id="toolModalContent" class="p-6 overflow-y-auto flex-grow">
                <!-- 工具内容将通过JavaScript动态加载 -->
                <div class="flex items-center justify-center h-64">
                    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 会员区域 -->
    <section id="membership" class="py-16 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">会员计划</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">选择适合你的会员等级，解锁更多高级功能和专属内容</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <!-- 免费版 -->
                <div class="bg-gray-50 rounded-2xl p-6 border border-gray-200 card-hover">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-2">免费版</h3>
                        <p class="text-gray-600 text-sm">基础工具和内容访问</p>
                    </div>
                    <div class="mb-6">
                        <span class="text-4xl font-bold">¥0</span>
                        <span class="text-gray-500">/永久</span>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">基础工具使用权限</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">免费博客内容访问</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">有限的使用次数</span>
                        </li>
                        <li class="flex items-start text-gray-400">
                            <i class="fa fa-times mt-1 mr-3"></i>
                            <span>无广告体验</span>
                        </li>
                        <li class="flex items-start text-gray-400">
                            <i class="fa fa-times mt-1 mr-3"></i>
                            <span>高级工具和功能</span>
                        </li>
                        <li class="flex items-start text-gray-400">
                            <i class="fa fa-times mt-1 mr-3"></i>
                            <span>会员专属内容</span>
                        </li>
                    </ul>
                    <button class="w-full py-3 bg-white border border-primary text-primary rounded-lg font-medium hover:bg-primary/5 transition">
                        免费使用
                    </button>
                </div>

                <!-- 专业版 -->
                <div class="bg-white rounded-2xl p-6 border-2 border-primary shadow-lg relative transform scale-105 z-10">
                    <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-white text-xs font-bold px-4 py-1 rounded-full">
                        最受欢迎
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-2">专业版</h3>
                        <p class="text-gray-600 text-sm">适合个人用户的完整功能</p>
                    </div>
                    <div class="mb-6">
                        <span class="text-4xl font-bold">¥29</span>
                        <span class="text-gray-500">/月</span>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">全部基础工具</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">全部博客内容</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">无限使用次数</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">无广告体验</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">全部高级工具</span>
                        </li>
                        <li class="flex items-start text-gray-400">
                            <i class="fa fa-times mt-1 mr-3"></i>
                            <span>团队共享功能</span>
                        </li>
                    </ul>
                    <button class="w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition">
                        升级专业版
                    </button>
                </div>

                <!-- 企业版 -->
                <div class="bg-gray-50 rounded-2xl p-6 border border-gray-200 card-hover">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-2">企业版</h3>
                        <p class="text-gray-600 text-sm">适合团队和企业使用</p>
                    </div>
                    <div class="mb-6">
                        <span class="text-4xl font-bold">¥99</span>
                        <span class="text-gray-500">/月</span>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">全部专业版功能</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">团队共享（5人）</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">优先技术支持</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">定制化工具需求</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">批量处理功能</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-check text-secondary mt-1 mr-3"></i>
                            <span class="text-gray-700">企业级数据安全</span>
                        </li>
                    </ul>
                    <button class="w-full py-3 bg-white border border-primary text-primary rounded-lg font-medium hover:bg-primary/5 transition">
                        联系销售
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- 关于我们 -->
    <section id="about" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row items-center gap-12">
                <div class="lg:w-1/2">
                    <img src="https://picsum.photos/id/20/600/400" alt="知享团队" class="rounded-2xl shadow-lg w-full h-auto">
                </div>
                <div class="lg:w-1/2">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-6">关于知享</h2>
                    <p class="text-gray-600 mb-4 text-lg">
                        知享成立于2023年，是一个专注于提供实用工具和优质内容的平台。我们相信，知识应该被分享，工具应该被普及。
                    </p>
                    <p class="text-gray-600 mb-6 text-lg">
                        我们的团队由一群热爱技术和教育的专业人士组成，致力于开发简单易用但功能强大的在线工具，同时创作有价值的内容，帮助用户提升效率，实现成长。
                    </p>
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div>
                            <div class="text-3xl font-bold text-primary mb-1">10k+</div>
                            <div class="text-gray-600">活跃用户</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-primary mb-1">50+</div>
                            <div class="text-gray-600">实用工具</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-primary mb-1">200+</div>
                            <div class="text-gray-600">原创文章</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-primary mb-1">99%</div>
                            <div class="text-gray-600">用户好评</div>
                        </div>
                    </div>
                    <a href="#" class="btn-primary inline-flex items-center">
                        了解更多 <i class="fa fa-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 订阅区域 -->
    <section class="py-16 bg-primary">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4 text-white">订阅我们的通讯</h2>
                <p class="text-blue-100 mb-8 text-lg">
                    获取最新工具更新、实用技巧和独家内容，直接发送到你的邮箱
                </p>
                <form class="flex flex-col sm:flex-row gap-3 max-w-lg mx-auto">
                    <input type="email" placeholder="输入你的邮箱地址" class="flex-grow px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-white">
                    <button type="submit" class="bg-white text-primary px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition">
                        立即订阅
                    </button>
                </form>
                <p class="text-blue-200 text-sm mt-4">
                    我们尊重你的隐私，不会向第三方分享你的信息
                </p>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="bg-dark text-gray-400 pt-16 pb-8">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <div>
                    <div class="flex items-center space-x-2 mb-6">
                        <span class="text-primary text-2xl"><i class="fa fa-lightbulb-o"></i></span>
                        <span class="text-xl font-bold text-white">知享</span>
                    </div>
                    <p class="mb-6">知识应该被分享，工具应该被普及。知享，让每个人都能高效获取知识和工具。</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-weibo text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-wechat text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-github text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fa fa-twitter text-xl"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-white text-lg font-semibold mb-6">快速链接</h3>
                    <ul class="space-y-3">
                        <li><a href="#blog" class="hover:text-white transition">博客</a></li>
                        <li><a href="#tools" class="hover:text-white transition">工具</a></li>
                        <li><a href="#membership" class="hover:text-white transition">会员</a></li>
                        <li><a href="#about" class="hover:text-white transition">关于我们</a></li>
                        <li><a href="#" class="hover:text-white transition">常见问题</a></li>
                        <li><a href="#" class="hover:text-white transition">联系我们</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-lg font-semibold mb-6">工具分类</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="hover:text-white transition">文本处理</a></li>
                        <li><a href="#" class="hover:text-white transition">密码工具</a></li>
                        <li><a href="#" class="hover:text-white transition">计算工具</a></li>
                        <li><a href="#" class="hover:text-white transition">图像工具</a></li>
                        <li><a href="#" class="hover:text-white transition">开发工具</a></li>
                        <li><a href="#" class="hover:text-white transition">转换工具</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-white text-lg font-semibold mb-6">联系我们</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <i class="fa fa-envelope mt-1 mr-3"></i>
                            <span>contact@zhixiang.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-map-marker mt-1 mr-3"></i>
                            <span>北京市海淀区中关村大街1号</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-phone mt-1 mr-3"></i>
                            <span>400-123-4567</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p>© 2023 知享. 保留所有权利.</p>
                    <div class="flex space-x-6 mt-4 md:mt-0">
                        <a href="#" class="hover:text-white transition">隐私政策</a>
                        <a href="#" class="hover:text-white transition">服务条款</a>
                        <a href="#" class="hover:text-white transition">Cookie政策</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button id="backToTop" class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all z-40">
        <i class="fa fa-chevron-up"></i>
    </button>

    <!-- 博客文章详情模态框 -->
    <div id="blogModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white z-10 p-6 border-b flex justify-between items-center">
                <h3 id="modalTitle" class="text-xl font-bold"></h3>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div id="modalContent" class="p-6">
                <!-- 文章内容将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // 基础功能脚本 - 导航、登录模态框等通用功能
        document.addEventListener('DOMContentLoaded', function() {
            // 导航栏滚动效果
            const navbar = document.getElementById('navbar');
            const backToTop = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    navbar.classList.add('shadow-md');
                    navbar.classList.remove('shadow-sm');
                    backToTop.classList.remove('opacity-0', 'invisible');
                    backToTop.classList.add('opacity-100', 'visible');
                } else {
                    navbar.classList.remove('shadow-md');
                    navbar.classList.add('shadow-sm');
                    backToTop.classList.add('opacity-0', 'invisible');
                    backToTop.classList.remove('opacity-100', 'visible');
                }
            });

            // 返回顶部功能
            backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // 移动端菜单切换
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');

            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // 模态框控制
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            const forgotPasswordModal = document.getElementById('forgotPasswordModal');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const mobileLoginBtn = document.getElementById('mobileLoginBtn');
            const mobileRegisterBtn = document.getElementById('mobileRegisterBtn');
            const closeLoginModal = document.getElementById('closeLoginModal');
            const closeRegisterModal = document.getElementById('closeRegisterModal');
            const closeForgotPasswordModal = document.getElementById('closeForgotPasswordModal');
            const switchToRegister = document.getElementById('switchToRegister');
            const switchToLogin = document.getElementById('switchToLogin');
            const forgotPasswordBtn = document.getElementById('forgotPasswordBtn');

            function openModal(modal) {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                document.body.style.overflow = 'hidden';
            }

            function closeModal(modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }

            loginBtn.addEventListener('click', () => openModal(loginModal));
            registerBtn.addEventListener('click', () => openModal(registerModal));
            mobileLoginBtn.addEventListener('click', () => {
                openModal(loginModal);
                mobileMenu.classList.add('hidden');
            });
            mobileRegisterBtn.addEventListener('click', () => {
                openModal(registerModal);
                mobileMenu.classList.add('hidden');
            });
            closeLoginModal.addEventListener('click', () => closeModal(loginModal));
            closeRegisterModal.addEventListener('click', () => closeModal(registerModal));
            closeForgotPasswordModal.addEventListener('click', () => closeModal(forgotPasswordModal));
            
            switchToRegister.addEventListener('click', () => {
                closeModal(loginModal);
                openModal(registerModal);
            });
            
            switchToLogin.addEventListener('click', () => {
                closeModal(registerModal);
                openModal(loginModal);
            });

            forgotPasswordBtn.addEventListener('click', () => {
                closeModal(loginModal);
                openModal(forgotPasswordModal);
            });

            // 点击模态框外部关闭
            loginModal.addEventListener('click', (e) => {
                if (e.target === loginModal) closeModal(loginModal);
            });
            registerModal.addEventListener('click', (e) => {
                if (e.target === registerModal) closeModal(registerModal);
            });
            forgotPasswordModal.addEventListener('click', (e) => {
                if (e.target === forgotPasswordModal) closeModal(forgotPasswordModal);
            });

            // 表单验证
            const loginEmail = document.getElementById('loginEmail');
            const emailError = document.getElementById('emailError');
            const registerEmail = document.getElementById('registerEmail');
            const regEmailError = document.getElementById('regEmailError');
            const registerPassword = document.getElementById('registerPassword');
            const registerConfirmPassword = document.getElementById('registerConfirmPassword');
            const passwordMismatchError = document.getElementById('passwordMismatchError');
            const passwordStrengthBar = document.getElementById('passwordStrengthBar');
            const passwordStrengthText = document.getElementById('passwordStrengthText');

            // 邮箱验证
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            loginEmail.addEventListener('input', () => {
                if (!validateEmail(loginEmail.value) && loginEmail.value !== '') {
                    emailError.classList.remove('hidden');
                    loginEmail.classList.add('border-red-500');
                    loginEmail.classList.remove('border-gray-300', 'border-green-500');
                } else {
                    emailError.classList.add('hidden');
                    if (loginEmail.value !== '') {
                        loginEmail.classList.remove('border-gray-300', 'border-red-500');
                        loginEmail.classList.add('border-green-500');
                    } else {
                        loginEmail.classList.remove('border-red-500', 'border-green-500');
                        loginEmail.classList.add('border-gray-300');
                    }
                }
            });

            registerEmail.addEventListener('input', () => {
                if (!validateEmail(registerEmail.value) && registerEmail.value !== '') {
                    regEmailError.classList.remove('hidden');
                    registerEmail.classList.add('border-red-500');
                    registerEmail.classList.remove('border-gray-300', 'border-green-500');
                } else {
                    regEmailError.classList.add('hidden');
                    if (registerEmail.value !== '') {
                        registerEmail.classList.remove('border-gray-300', 'border-red-500');
                        registerEmail.classList.add('border-green-500');
                    } else {
                        registerEmail.classList.remove('border-red-500', 'border-green-500');
                        registerEmail.classList.add('border-gray-300');
                    }
                }
            });

            // 密码强度检测
            registerPassword.addEventListener('input', () => {
                checkPasswordMatch();
                
                const password = registerPassword.value;
                let strength = 0;
                
                if (password.length >= 8) strength += 25;
                if (password.length >= 12) strength += 25;
                if (/[A-Z]/.test(password)) strength += 25;
                if (/[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password)) strength += 25;
                
                passwordStrengthBar.style.width = `${strength}%`;
                
                if (strength === 0) {
                    passwordStrengthBar.className = 'h-full bg-gray-300 transition-all duration-300';
                    passwordStrengthText.textContent = '密码强度';
                } else if (strength < 50) {
                    passwordStrengthBar.className = 'h-full bg-red-500 transition-all duration-300';
                    passwordStrengthText.textContent = '弱';
                } else if (strength < 75) {
                    passwordStrengthBar.className = 'h-full bg-yellow-500 transition-all duration-300';
                    passwordStrengthText.textContent = '中';
                } else {
                    passwordStrengthBar.className = 'h-full bg-green-500 transition-all duration-300';
                    passwordStrengthText.textContent = '强';
                }
            });

            // 密码匹配检测
            function checkPasswordMatch() {
                if (registerPassword.value !== registerConfirmPassword.value && registerConfirmPassword.value !== '') {
                    passwordMismatchError.classList.remove('hidden');
                    registerConfirmPassword.classList.add('border-red-500');
                    registerConfirmPassword.classList.remove('border-gray-300', 'border-green-500');
                } else {
                    passwordMismatchError.classList.add('hidden');
                    if (registerConfirmPassword.value !== '') {
                        registerConfirmPassword.classList.remove('border-gray-300', 'border-red-500');
                        registerConfirmPassword.classList.add('border-green-500');
                    } else {
                        registerConfirmPassword.classList.remove('border-red-500', 'border-green-500');
                        registerConfirmPassword.classList.add('border-gray-300');
                    }
                }
            }

            registerConfirmPassword.addEventListener('input', checkPasswordMatch);

            // 密码显示/隐藏切换
            const toggleLoginPassword = document.getElementById('toggleLoginPassword');
            const toggleRegisterPassword = document.getElementById('toggleRegisterPassword');
            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');

            toggleLoginPassword.addEventListener('click', () => {
                const type = loginPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                loginPassword.setAttribute('type', type);
                toggleLoginPassword.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
            });

            toggleRegisterPassword.addEventListener('click', () => {
                const type = registerPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                registerPassword.setAttribute('type', type);
                toggleRegisterPassword.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
            });

            toggleConfirmPassword.addEventListener('click', () => {
                const type = registerConfirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                registerConfirmPassword.setAttribute('type', type);
                toggleConfirmPassword.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
            });

            // 登录功能
            const loginForm = document.getElementById('loginForm');
            const loginSubmitBtn = document.getElementById('loginSubmitBtn');
            const loginLoader = document.getElementById('loginLoader');
            const loginError = document.getElementById('loginError');

            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // 验证邮箱格式
                if (!validateEmail(loginEmail.value)) {
                    emailError.classList.remove('hidden');
                    loginEmail.classList.add('border-red-500');
                    return;
                }
                
                // 显示加载状态
                loginSubmitBtn.disabled = true;
                loginLoader.classList.remove('hidden');
                loginError.classList.add('hidden');
                
                try {
                    // 调用Firebase登录API
                    const userCredential = await firebase.auth().signInWithEmailAndPassword(
                        loginEmail.value,
                        loginPassword.value
                    );
                    
                    // 登录成功
                    const user = userCredential.user;
                    console.log('登录成功:', user);
                    
                    // 关闭模态框并重置表单
                    closeModal(loginModal);
                    loginForm.reset();
                    
                    // 更新UI显示登录状态
                    updateUserInterface(user);
                    
                    // 显示成功提示
                    showToast('登录成功！');
                } catch (error) {
                    // 处理登录错误
                    console.error('登录错误:', error);
                    loginError.classList.remove('hidden');
                    
                    // 根据错误类型显示不同信息
                    switch(error.code) {
                        case 'auth/user-not-found':
                            loginError.textContent = '该邮箱尚未注册';
                            break;
                        case 'auth/wrong-password':
                            loginError.textContent = '密码错误，请重新输入';
                            break;
                        case 'auth/invalid-email':
                            loginError.textContent = '邮箱格式无效';
                            break;
                        case 'auth/network-request-failed':
                            loginError.textContent = '网络错误，请检查网络连接';
                            break;
                        default:
                            loginError.textContent = '登录失败: ' + error.message;
                    }
                } finally {
                    // 隐藏加载状态
                    loginSubmitBtn.disabled = false;
                    loginLoader.classList.add('hidden');
                }
            });

            // 注册功能
            const registerForm = document.getElementById('registerForm');
            const registerSubmitBtn = document.getElementById('registerSubmitBtn');
            const registerLoader = document.getElementById('registerLoader');
            const registerError = document.getElementById('registerError');

            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // 验证邮箱格式
                if (!validateEmail(registerEmail.value)) {
                    regEmailError.classList.remove('hidden');
                    registerEmail.classList.add('border-red-500');
                    return;
                }
                
                // 验证密码匹配
                if (registerPassword.value !== registerConfirmPassword.value) {
                    passwordMismatchError.classList.remove('hidden');
                    return;
                }
                
                // 验证密码强度
                if (registerPassword.value.length < 8) {
                    registerError.classList.remove('hidden');
                    registerError.textContent = '密码长度至少为8位';
                    return;
                }
                
                // 显示加载状态
                registerSubmitBtn.disabled = true;
                registerLoader.classList.remove('hidden');
                registerError.classList.add('hidden');
                
                try {
                    // 调用Firebase注册API
                    const userCredential = await firebase.auth().createUserWithEmailAndPassword(
                        registerEmail.value,
                        registerPassword.value
                    );
                    
                    // 更新用户资料（添加用户名）
                    const user = userCredential.user;
                    await user.updateProfile({
                        displayName: document.getElementById('registerName').value
                    });
                    
                    console.log('注册成功:', user);
                    
                    // 关闭模态框并重置表单
                    closeModal(registerModal);
                    registerForm.reset();
                    passwordStrengthBar.style.width = '0%';
                    
                    // 更新UI显示登录状态
                    updateUserInterface(user);
                    
                    // 显示成功提示
                    showToast('注册成功！欢迎加入知享');
                } catch (error) {
                    // 处理注册错误
                    console.error('注册错误:', error);
                    registerError.classList.remove('hidden');
                    
                    // 根据错误类型显示不同信息
                    switch(error.code) {
                        case 'auth/email-already-in-use':
                            registerError.textContent = '该邮箱已被注册';
                            break;
                        case 'auth/invalid-email':
                            registerError.textContent = '邮箱格式无效';
                            break;
                        case 'auth/weak-password':
                            registerError.textContent = '密码强度不足，请使用更强的密码';
                            break;
                        case 'auth/network-request-failed':
                            registerError.textContent = '网络错误，请检查网络连接';
                            break;
                        default:
                            registerError.textContent = '注册失败: ' + error.message;
                    }
                } finally {
                    // 隐藏加载状态
                    registerSubmitBtn.disabled = false;
                    registerLoader.classList.add('hidden');
                }
            });

            // 忘记密码功能
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            const forgotPasswordSubmitBtn = document.getElementById('forgotPasswordSubmitBtn');
            const forgotPasswordLoader = document.getElementById('forgotPasswordLoader');
            const forgotPasswordError = document.getElementById('forgotPasswordError');
            const forgotPasswordSuccess = document.getElementById('forgotPasswordSuccess');

            forgotPasswordForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const email = document.getElementById('forgotEmail').value;
                
                // 验证邮箱格式
                if (!validateEmail(email)) {
                    forgotPasswordError.classList.remove('hidden');
                    forgotPasswordSuccess.classList.add('hidden');
                    forgotPasswordError.textContent = '请输入有效的邮箱地址';
                    return;
                }
                
                // 显示加载状态
                forgotPasswordSubmitBtn.disabled = true;
                forgotPasswordLoader.classList.remove('hidden');
                forgotPasswordError.classList.add('hidden');
                forgotPasswordSuccess.classList.add('hidden');
                
                try {
                    // 调用Firebase发送密码重置邮件API
                    await firebase.auth().sendPasswordResetEmail(email);
                    
                    // 显示成功信息
                    forgotPasswordSuccess.classList.remove('hidden');
                    forgotPasswordSuccess.textContent = '重置密码的链接已发送到您的邮箱，请查收';
                    
                    // 清空输入框
                    document.getElementById('forgotEmail').value = '';
                    
                    // 3秒后自动关闭模态框
                    setTimeout(() => {
                        closeModal(forgotPasswordModal);
                    }, 3000);
                    
                } catch (error) {
                    // 处理错误
                    console.error('发送重置密码邮件错误:', error);
                    forgotPasswordError.classList.remove('hidden');
                    
                    switch(error.code) {
                        case 'auth/user-not-found':
                            forgotPasswordError.textContent = '该邮箱尚未注册';
                            break;
                        case 'auth/invalid-email':
                            forgotPasswordError.textContent = '邮箱格式无效';
                            break;
                        case 'auth/network-request-failed':
                            forgotPasswordError.textContent = '网络错误，请检查网络连接';
                            break;
                        default:
                            forgotPasswordError.textContent = '操作失败: ' + error.message;
                    }
                } finally {
                    // 隐藏加载状态
                    forgotPasswordSubmitBtn.disabled = false;
                    forgotPasswordLoader.classList.add('hidden');
                }
            });

            // 退出登录功能
            const logoutBtn = document.getElementById('logoutBtn');
            const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');

            if (logoutBtn) {
                logoutBtn.addEventListener('click', async () => {
                    try {
                        await firebase.auth().signOut();
                        showToast('已成功退出登录');
                        // 刷新页面以更新UI
                        window.location.reload();
                    } catch (error) {
                        console.error('退出登录错误:', error);
                        showToast('退出登录失败: ' + error.message, 'error');
                    }
                });
            }

            if (mobileLogoutBtn) {
                mobileLogoutBtn.addEventListener('click', async () => {
                    mobileMenu.classList.add('hidden');
                    try {
                        await firebase.auth().signOut();
                        showToast('已成功退出登录');
                        // 刷新页面以更新UI
                        window.location.reload();
                    } catch (error) {
                        console.error('退出登录错误:', error);
                        showToast('退出登录失败: ' + error.message, 'error');
                    }
                });
            }
            

            // 监听用户登录状态变化
            firebase.auth().onAuthStateChanged((user) => {
                updateUserInterface(user);
            });

            // 更新用户界面（根据登录状态）
            function updateUserInterface(user) {
                const guestMenu = document.getElementById('guestMenu');
                const authenticatedMenu = document.getElementById('authenticatedMenu');
                const mobileGuestMenu = document.getElementById('mobileGuestMenu');
                const mobileAuthenticatedMenu = document.getElementById('mobileAuthenticatedMenu');
                const userName = document.getElementById('userName');
                const mobileUserName = document.getElementById('mobileUserName');
                
                if (user) {
                    // 用户已登录
                    guestMenu.classList.add('hidden');
                    authenticatedMenu.classList.remove('hidden');
                    authenticatedMenu.classList.add('flex');
                    mobileGuestMenu.classList.add('hidden');
                    mobileAuthenticatedMenu.classList.remove('hidden');
                    
                    // 更新用户信息
                    userName.textContent = user.displayName || '用户';
                    mobileUserName.textContent = user.displayName || '用户';
                } else {
                    // 用户未登录
                    guestMenu.classList.remove('hidden');
                    authenticatedMenu.classList.add('hidden');
                    authenticatedMenu.classList.remove('flex');
                    mobileGuestMenu.classList.remove('hidden');
                    mobileAuthenticatedMenu.classList.add('hidden');
                }
            }

            // 显示提示消息
            function showToast(message, type = 'success') {
                // 检查是否已有toast，如有则移除
                const existingToast = document.querySelector('.toast-notification');
                if (existingToast) {
                    existingToast.remove();
                }
                
                // 创建toast元素
                const toast = document.createElement('div');
                toast.className = `toast-notification fixed bottom-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-y-0 opacity-100 ${
                    type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
                }`;
                toast.textContent = message;
                
                // 添加到页面
                document.body.appendChild(toast);
                
                // 3秒后自动消失
                setTimeout(() => {
                    toast.classList.add('opacity-0', 'translate-y-10');
                    setTimeout(() => {
                        toast.remove();
                    }, 300);
                }, 3000);
            }

            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        mobileMenu.classList.add('hidden');
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
    <script>
    // 优化的博客数据加载逻辑（更适合首页）
    let currentPage = 1; // 分页页码
    let currentCategory = null; // 当前选中的分类ID

    async function loadBlogPosts(page = 1, categoryId = null) {
        const blogListEl = document.getElementById('blogList');
        const categoriesEl = document.getElementById('blogCategories');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        
        // 避免重复加载
        if (blogListEl.dataset.loading === 'true') return;
        blogListEl.dataset.loading = 'true';
        
        try {
            // 1. 显示临时加载状态（使用文档碎片优化性能）
            const fragment = document.createDocumentFragment();
            const tempSkeletons = 3;
            
            // 首次加载或切换分类时清空列表
            if (page === 1) {
                for (let i = 0; i < tempSkeletons; i++) {
                    const skeleton = document.createElement('div');
                    skeleton.className = 'bg-white rounded-xl overflow-hidden blog-card-shadow animate-pulse';
                    skeleton.innerHTML = `
                        <div class="h-48 bg-gray-200"></div>
                        <div class="p-6">
                            <div class="flex justify-between mb-4">
                                <div class="h-5 w-20 bg-gray-200 rounded"></div>
                                <div class="h-5 w-20 bg-gray-200 rounded"></div>
                            </div>
                            <div class="h-8 w-3/4 bg-gray-200 rounded mb-4"></div>
                            <div class="h-4 bg-gray-200 rounded mb-2"></div>
                            <div class="h-4 bg-gray-200 rounded mb-6"></div>
                            <div class="flex items-center">
                                <div class="h-10 w-10 rounded-full bg-gray-200 mr-3"></div>
                                <div class="h-5 w-24 bg-gray-200 rounded"></div>
                            </div>
                        </div>
                    `;
                    fragment.appendChild(skeleton);
                }
                
                blogListEl.innerHTML = '';
                blogListEl.appendChild(fragment);
            } else {
                // 加载更多时显示单个骨架屏
                const loadingIndicator = document.createElement('div');
                loadingIndicator.id = 'loadingIndicator';
                loadingIndicator.className = 'col-span-full flex justify-center py-8';
                loadingIndicator.innerHTML = '<div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>';
                blogListEl.appendChild(loadingIndicator);
            }
            
            // 2. 从Notion API获取实际数据（添加超时控制）
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 8000); // 8秒超时
            
            // 构建请求URL，包含分页和分类参数
            let url = `/api/notion/blog?page=${page}`;
            if (categoryId) {
                url += `&category=${categoryId}`;
            }
            
            const response = await fetch(url, {
                signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) throw new Error('网络响应异常');
            const { posts, categories } = await response.json();
            
            // 3. 渲染分类（仅在首次加载或分类数据变化时）
            if (categoriesEl && page === 1) {
                categoriesEl.innerHTML = '';
                // 添加"全部"分类
                const allBtn = document.createElement('button');
                allBtn.className = `px-4 py-2 rounded-full text-sm shadow-sm transition ${
                    !categoryId ? 'bg-primary text-white' : 'bg-white text-gray-700 hover:bg-primary hover:text-white'
                }`;
                allBtn.textContent = '全部';
                allBtn.addEventListener('click', () => filterPostsByCategory(null));
                categoriesEl.appendChild(allBtn);
                
                // 添加其他分类
                categories.forEach(category => {
                    const btn = document.createElement('button');
                    btn.className = `px-4 py-2 rounded-full text-sm shadow-sm transition ${
                        categoryId === category.id ? 'bg-primary text-white' : 'bg-white text-gray-700 hover:bg-primary hover:text-white'
                    }`;
                    btn.textContent = category.name;
                    btn.addEventListener('click', () => filterPostsByCategory(category.id));
                    categoriesEl.appendChild(btn);
                });
            }
            
            // 4. 渲染实际博客文章
            // 移除加载指示器（如果存在）
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (loadingIndicator) {
                loadingIndicator.remove();
            }
            
            if (posts.length === 0) {
                // 如果是第一页且无数据
                if (page === 1) {
                    blogListEl.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <p class="text-gray-500">暂无博客文章</p>
                        </div>
                    `;
                }
                // 隐藏加载更多按钮
                loadMoreBtn.classList.add('hidden');
            } else {
                const postFragment = document.createDocumentFragment();
                posts.forEach(post => {
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl overflow-hidden blog-card-shadow blog-card-hover';
                    card.innerHTML = `
                        <img src="${post.coverImage || 'https://picsum.photos/id/20/400/300'}" 
                             alt="${post.title}" class="w-full h-48 object-cover" loading="lazy">
                        <div class="p-6">
                            <div class="flex justify-between mb-3">
                                <span class="text-primary text-sm font-medium">${post.category}</span>
                                <span class="text-gray-500 text-sm">${new Date(post.publishedAt).toLocaleDateString()}</span>
                            </div>
                            <h3 class="text-xl font-bold mb-3 hover:text-primary transition">
                                <a href="/blog/${post.slug}">${post.title}</a>
                            </h3>
                            <p class="text-gray-600 text-sm mb-5 line-clamp-2">${post.excerpt}</p>
                            <div class="flex items-center">
                                <img src="${post.authorAvatar || 'https://picsum.photos/id/1005/40/40'}" 
                                     alt="${post.authorName}" class="w-10 h-10 rounded-full mr-3" loading="lazy">
                                <span class="text-gray-700 text-sm">${post.authorName}</span>
                            </div>
                        </div>
                    `;
                    postFragment.appendChild(card);
                });
                
                // 分页加载时追加内容，否则覆盖
                if (page > 1) {
                    blogListEl.appendChild(postFragment);
                } else {
                    blogListEl.innerHTML = '';
                    blogListEl.appendChild(postFragment);
                }
                
                // 控制"加载更多"按钮显示
                // 假设每页最多显示6篇文章，小于6篇则隐藏加载更多
                loadMoreBtn.classList.toggle('hidden', posts.length < 6);
            }
            
        } catch (error) {
            console.error('加载博客失败:', error);
            // 保留已加载内容，仅在首次加载失败时显示错误
            if (currentPage === 1) {
                blogListEl.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <p class="text-red-500">加载失败，请稍后重试</p>
                        <button onclick="loadBlogPosts()" class="mt-3 text-primary hover:underline">重试</button>
                    </div>
                `;
            } else {
                // 加载更多失败时显示错误提示
                const errorEl = document.createElement('div');
                errorEl.className = 'col-span-full text-center py-4';
                errorEl.innerHTML = `
                    <p class="text-red-500 text-sm">加载更多失败</p>
                    <button onclick="loadBlogPosts(${currentPage}, ${currentCategory})" class="text-primary hover:underline text-sm">重试</button>
                `;
                blogListEl.appendChild(errorEl);
            }
            // 隐藏加载更多按钮
            loadMoreBtn.classList.add('hidden');
        } finally {
            blogListEl.dataset.loading = 'false';
        }
    }

    // 分类筛选功能
    function filterPostsByCategory(categoryId) {
        currentCategory = categoryId;
        currentPage = 1; // 重置为第一页
        loadBlogPosts(currentPage, currentCategory);
    }

    // 页面加载时执行，支持延迟加载优化首页性能
    document.addEventListener('DOMContentLoaded', () => {
        // 当页面滚动到博客区域或页面加载完成后延迟执行
        const observer = new IntersectionObserver((entries) => {
            if (entries[0].isIntersecting) {
                loadBlogPosts();
                observer.disconnect();
            }
        }, { threshold: 0.1 });
        
        const blogSection = document.getElementById('blog');
        if (blogSection) {
            observer.observe(blogSection);
        } else {
            // 如果没有找到博客区域，直接加载
            setTimeout(loadBlogPosts, 500); // 延迟加载，优先渲染页面其他内容
        }

        // 加载更多按钮点击事件
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        if (loadMoreBtn) {
            loadMoreBtn.addEventListener('click', () => {
                currentPage++;
                loadBlogPosts(currentPage, currentCategory);
            });
        }
    });
</script>
    <script type="module" src="main.js"></script>
</body>
</html>
